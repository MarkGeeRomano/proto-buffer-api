<html>
  <head>
    <script src="long.js"></script>
    <script src="bytebuffer.js"></script>
    <script src="protobuf.js"></script>
    <script src="axios.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">
      "use strict";
      var ProtoBuf = dcodeIO.ProtoBuf
      var Message = ProtoBuf
        .loadProtoFile("./message.proto", (err, builder)=>{
          Message = builder.build("Message")
          loadMessage()
        })

      let loadMessage = ()=> {
        axios.get('/api/messages', {responseType: 'arraybuffer'})
          .then(function (response) {
            console.log(response);
            var msg = Message.decode(response.data);
            console.log(msg);
          })
          .catch(function (response) {
            console.log(response);
          });
      }
    </script>
  </body>
</html>